(function(t){function e(e){for(var n,s,c=e[0],a=e[1],u=e[2],d=0,p=[];d<c.length;d++)s=c[d],i[s]&&p.push(i[s][0]),i[s]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,c=1;c<r.length;c++){var a=r[c];0!==i[a]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},i={1:0},o=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=a;o.push([9,0]),r()})({"+WjE":function(t,e,r){},"+rca":function(t,e,r){"use strict";var n=r("koS1"),i=r.n(n);i.a},"1l8x":function(t,e,r){"use strict";var n=r("+WjE"),i=r.n(n);i.a},"3bul":function(t,e,r){"use strict";var n=r("zyiU"),i=r.n(n);i.a},"7In+":function(t,e,r){},9:function(t,e,r){t.exports=r("zUnb")},BbRy:function(t,e,r){"use strict";var n=r("tKqa"),i=r.n(n);i.a},N4VS:function(t,e,r){},"P+lK":function(t,e,r){"use strict";var n=r("Vi+Z"),i=r.n(n);i.a},"Vi+Z":function(t,e,r){},Z1W8:function(t,e,r){"use strict";var n=r("7In+"),i=r.n(n);i.a},cvBV:function(t,e,r){},koS1:function(t,e,r){},nNx0:function(t,e,r){"use strict";var n=r("uWEC"),i=r.n(n);i.a},oi7x:function(t,e,r){"use strict";var n=r("cvBV"),i=r.n(n);i.a},pnXB:function(t,e,r){"use strict";var n=r("N4VS"),i=r.n(n);i.a},tKqa:function(t,e,r){},uWEC:function(t,e,r){},zUnb:function(t,e,r){"use strict";r.r(e);r("VRzm");var n,i=r("Kw5r"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("SubHeader",{attrs:{totalPrice:t.presenter.totalPrice,cartItems:t.presenter.cartItems}}),r("Header"),r("div",{staticClass:"container"},[r("router-view")],1)],1)},s=[],c=function(t){var e=t.getItems(),r=e.reduce(function(t,e){return t+e.price},0);return r},a=function(t){var e=t.cartRepository;return{totalPrice:c(e),cartItems:e.getItems()}},u=r("L2JU"),l=function(){return{cart:{items:[]},isCheckingOut:!1}};(function(t){t["ADD_ITEM"]="cart/add_item",t["CLEAR_ITEMS"]="cart/clear_items",t["SET_CHECKING_OUT"]="cart/set_checking_out"})(n||(n={}));var d,p,f=function(){function t(t){this.payload=t,this.type=n.ADD_ITEM}return t}(),m=function(){function t(t){this.payload=t,this.type=n.SET_CHECKING_OUT}return t}(),h=function(){function t(){this.type=n.CLEAR_ITEMS}return t}(),v=(d={},d[n.ADD_ITEM]=function(t,e){var r=e.payload;t.cart={items:t.cart.items.concat([r])}},d[n.SET_CHECKING_OUT]=function(t,e){t.isCheckingOut=e.payload},d[n.CLEAR_ITEMS]=function(t){var e=l().cart.items;t.cart.items=e.slice()},d),_={state:l,mutations:v},y=function(){return{page:1,size:20,items:[],item:null}};(function(t){t["STORE_ITEM"]="product/store_item",t["CLEAR_ITEM"]="product/clear_item",t["STORE_ITEMS"]="product/store_items",t["CLEAR_ITEMS"]="product/clear_items"})(p||(p={}));var b,C=function(){function t(t){this.payload=t,this.type=p.STORE_ITEM}return t}(),g=function(){function t(){this.type=p.CLEAR_ITEM}return t}(),E=function(){function t(t){this.payload=t,this.type=p.STORE_ITEMS}return t}(),I=function(){function t(){this.type=p.CLEAR_ITEMS}return t}(),w=(b={},b[p.STORE_ITEM]=function(t,e){var r=e.payload;t.item=r},b[p.CLEAR_ITEM]=function(t){var e=y();t.item=e.item},b[p.STORE_ITEMS]=function(t,e){var r=e.payload,n=r.page,i=r.size,o=r.items;t.page=n,t.size=i,t.items=o},b[p.CLEAR_ITEMS]=function(t){var e=y();t.items=e.items},b),x={state:y,mutations:w};i["a"].use(u["a"]);var S,P=new u["a"].Store({modules:{cart:_,product:x}}),T=function(){function t(){}return t.prototype.getItems=function(){return P.state.cart.cart.items},t.prototype.isCheckingOut=function(){return P.state.cart.isCheckingOut},t}(),R=T,O=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},k=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Header"},[r("a",{staticClass:"Header__Title",attrs:{href:"/#/"}},[t._v("EC Site Sample")]),r("a",{staticClass:"Header__Link",attrs:{href:"https://github.com/andoshin11/clean-architecture-example-vue",target:"_blank"}},[t._v("\n  GitHub\n  ")])])}],j=i["a"].extend({}),D=j,M=(r("BbRy"),r("KHd+")),L=Object(M["a"])(D,O,k,!1,null,"3e2de43d",null),A=L.exports,B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"SubHeader"},[r("div",{staticClass:"SubHeader__Total"},[t._v("Total Price: £"+t._s(t.totalPrice))]),r("router-link",{staticClass:"SubHeader__Cart",attrs:{to:"/cart"}},[t._v("\n    My Cart"),t.cartItems&&t.cartItems.length>0?r("span",{staticClass:"SubHeader__Badge"},[t._v(t._s(t.cartItems.length))]):t._e()])],1)},N=[],H=(r("xfY5"),i["a"].extend({props:{totalPrice:{type:Number,required:!0},cartItems:{type:Array}}})),$=H,q=(r("oi7x"),Object(M["a"])($,B,N,!1,null,"29edc7cb",null)),z=q.exports,U=i["a"].extend({components:{Header:A,SubHeader:z},computed:{presenter:function(){return a({cartRepository:new R})}}}),G=U,W=(r("nNx0"),Object(M["a"])(G,o,s,!1,null,null,null)),K=W.exports,V=r("jE9Z"),Z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ProductsListContainer")},J=[],F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ProductsList"},[r("div",{staticClass:"ProductsList__Products"},t._l(t.presenter.items,function(t){return r("Product",{key:t.id,attrs:{product:t}})}))])},X=[],Y=r("mrSG"),Q=function(t){var e=t.productRepository;return{items:e.getItems()}},tt=function(){function t(t){var e=t.productRepository,r=t.request,n=t.errorService;this.productRepository=e,this.request=r,this.errorService=n}return t.prototype.execute=function(){return Y["b"](this,void 0,void 0,function(){var t,e;return Y["c"](this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,4]),[4,this.productRepository.fetchItems(this.request)];case 1:return t=r.sent(),this.productRepository.saveItems(t),[3,4];case 2:return e=r.sent(),[4,this.errorService.handle(e)];case 3:return r.sent(),[3,4];case 4:return[2]}})})},t}(),et=tt,rt=function(){function t(t){var e=t.productRepository;this.productRepository=e}return t.prototype.execute=function(){return Y["b"](this,void 0,void 0,function(){return Y["c"](this,function(t){switch(t.label){case 0:return[4,this.productRepository.clearItems()];case 1:return t.sent(),[2]}})})},t}(),nt=rt,it=function(){function t(t){var e=t.context,r=void 0===e?"hoge":e;this.context=r}return t.prototype.handle=function(t){return Y["b"](this,void 0,void 0,function(){return Y["c"](this,function(e){return console.log("error called in "+this.context),console.log(t),[2]})})},t}(),ot=it,st=r("vDqi"),ct=r.n(st);(function(t){t["GET"]="GET",t["POST"]="POST",t["DELETE"]="DELETE",t["PUT"]="PUT"})(S||(S={}));var at,ut=function(){function t(){this.baseURL="http://localhost:4000/v1",this.timeout=15e3}return t.prototype.request=function(t){var e=this,r=t.method===S.GET;return new Promise(function(n,i){ct.a.request({url:t.path,method:t.method,params:r&&t.params,data:!r&&t.params,withCredentials:!0,timeout:e.timeout,baseURL:t.baseURL||e.baseURL,headers:e.createHeaders()}).then(function(r){var i=t.parse?t.parse(r):e.parse(r);n(i)}).catch(function(t){var r=e.normalizeError(t);i(r)})})},t.prototype.parse=function(t){return t},t.prototype.normalizeError=function(t){return{status:t.response&&t.response.status,message:t.message,raw:t}},t.prototype.createHeaders=function(){return{}},t.shared=new t,t}();(function(t){var e=function(){function t(t){this.params=t,this.path="/api/products",this.method=S.GET,this.parse=function(t){return t.data}}return t}();t.GetProducts=e;var r=function(){function t(t){this.method=S.GET,this.parse=function(t){return t.data},this.path="/api/products/"+t}return t}();t.GetProduct=r})(at||(at={}));var lt,dt,pt=function(){function t(){}return t.prototype.fetchItem=function(t){return Y["b"](this,void 0,Promise,function(){return Y["c"](this,function(e){switch(e.label){case 0:return[4,ut.shared.request(new at.GetProduct(t))];case 1:return[2,e.sent()]}})})},t.prototype.saveItem=function(t){P.commit(new C(t))},t.prototype.clearItem=function(){P.commit(new g)},t.prototype.getItem=function(){return P.state.product.item},t.prototype.fetchItems=function(t){return Y["b"](this,void 0,void 0,function(){return Y["c"](this,function(e){switch(e.label){case 0:return[4,ut.shared.request(new at.GetProducts(t))];case 1:return[2,e.sent()]}})})},t.prototype.saveItems=function(t){P.commit(new E(t))},t.prototype.clearItems=function(){P.commit(new I)},t.prototype.getItems=function(){return P.state.product.items},t}(),ft=pt,mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a",{staticClass:"Product",attrs:{href:t.productUrl}},[r("img",{staticClass:"Product__Image",attrs:{src:t.product.thumbnail}}),r("div",{staticClass:"Product__Designer"},[t._v(t._s(t.product.designer))]),r("div",{staticClass:"Product__Name"},[t._v(t._s(t.product.name))]),r("div",{staticClass:"Produt__Price"},[t._v("£"+t._s(t.product.price))])])},ht=[],vt=i["a"].extend({props:{product:{type:Object,required:!0}},computed:{productUrl:function(){var t=this.product?this.product.id:"";return"/#/products/"+t}}}),_t=vt,yt=(r("3bul"),Object(M["a"])(_t,mt,ht,!1,null,null,null)),bt=yt.exports,Ct=i["a"].extend({components:{Product:bt},data:function(){return{page:0,size:20,criteria:{designer:""}}},computed:{productsParams:function(){return{page:this.page,size:this.size,criteria:this.criteria}},presenter:function(){var t={productRepository:new ft};return Q(t)}},mounted:function(){return Y["b"](this,void 0,void 0,function(){var t;return Y["c"](this,function(e){switch(e.label){case 0:return t={productRepository:new ft,request:this.productsParams,errorService:new ot({context:"mounting products list page"})},[4,new et(t).execute()];case 1:return e.sent(),[2]}})})},destroyed:function(){return Y["b"](this,void 0,void 0,function(){var t;return Y["c"](this,function(e){switch(e.label){case 0:return t={productRepository:new ft},[4,new nt(t).execute()];case 1:return e.sent(),[2]}})})}}),gt=Ct,Et=(r("1l8x"),Object(M["a"])(gt,F,X,!1,null,null,null)),It=Et.exports,wt=i["a"].extend({name:"home",components:{ProductsListContainer:It}}),xt=wt,St=Object(M["a"])(xt,Z,J,!1,null,null,null),Pt=St.exports,Tt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Rt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"about"},[r("h1",[t._v("This is an about page")])])}],Ot={},kt=Object(M["a"])(Ot,Tt,Rt,!1,null,null,null),jt=kt.exports,Dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ProductsDetailContainer",{attrs:{id:t.$route.params.id}})},Mt=[],Lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"ProductsDetail"},[t.presenter.item?[r("div",{staticClass:"ProductsDetail__Left"},[r("img",{staticClass:"ProductsDetail__Image",attrs:{src:t.presenter.item.thumbnail}})]),r("div",{staticClass:"ProductsDetail__Right"},[r("div",{staticClass:"ProductsDetail__Info"},[r("div",{staticClass:"ProductsDetail__Designer"},[t._v(t._s(t.presenter.item.designer))]),r("div",{staticClass:"ProductsDetail__Nam"},[t._v(t._s(t.presenter.item.name))]),r("div",{staticClass:"ProductsDetail__Price"},[t._v("£"+t._s(t.presenter.item.price))])]),t.presenter.isInCart?r("div",{staticClass:"ProductsDetail__Button"},[r("Button",{attrs:{text:"Already in Cart",autoWidth:"",disabled:""}})],1):r("div",{staticClass:"ProductsDetail__Button"},[r("Button",{attrs:{text:"Add to Cart",autoWidth:""},on:{click:t.addItemToCart}})],1)])]:t._e()],2)},At=[],Bt=function(){function t(){}return t.prototype.addItemToCart=function(t){var e=1.08*t.price,r=Y["a"]({},t,{checkoutPrice:e});P.commit(new f(r))},t.prototype.checkOut=function(){return Y["b"](this,void 0,void 0,function(){return Y["c"](this,function(t){return P.commit(new m(!0)),setTimeout(function(){P.commit(new h),P.commit(new m(!1))},2e3),[2]})})},t}(),Nt=(r("dRSK"),function(t,e){var r=t.getItem(),n=e.getItems();if(!r||n.length<1)return!1;var i=n.find(function(t){return t.id===r.id});return!!i}),Ht=function(t){var e=t.productRepository,r=t.cartRepository;return{item:e.getItem(),isInCart:Nt(e,r)}},$t=function(){function t(t){var e=t.productRepository,r=t.id,n=t.errorService;this.productRepository=e,this.id=r,this.errorService=n}return t.prototype.execute=function(){return Y["b"](this,void 0,void 0,function(){var t,e;return Y["c"](this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,4]),[4,this.productRepository.fetchItem(this.id)];case 1:return t=r.sent(),this.productRepository.saveItem(t),[3,4];case 2:return e=r.sent(),[4,this.errorService.handle(e)];case 3:return r.sent(),[3,4];case 4:return[2]}})})},t}(),qt=$t,zt=function(){function t(t){var e=t.productRepository;this.productRepository=e}return t.prototype.execute=function(){return Y["b"](this,void 0,void 0,function(){return Y["c"](this,function(t){return this.productRepository.clearItem(),[2]})})},t}(),Ut=zt,Gt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"Button",class:[t.typeClassName,t.sizeClassName,{"-autoWidth":t.autoWidth}],attrs:{type:t.nativeType,disabled:t.disabled},on:{click:t.handleClick}},[r("div",{staticClass:"Button__Text"},[t._v(t._s(t.text))])])},Wt=[];(function(t){t["Primary"]="primary",t["Secondary"]="secondary",t["Destructive"]="destructive"})(lt||(lt={})),function(t){t["Small"]="small",t["Midium"]="midium",t["Large"]="large"}(dt||(dt={}));var Kt=i["a"].extend({props:{nativeType:{type:String,default:"button"},disabled:{type:Boolean,default:!1},type:{type:String,default:lt.Primary},size:{type:String,default:dt.Midium},autoWidth:{type:Boolean,default:!1},text:{type:String,required:!0},iconName:{type:String,default:""}},computed:{typeClassName:function(){return"-"+this.type},sizeClassName:function(){return"-"+this.size}},methods:{handleClick:function(){this.$emit("click")}}}),Vt=Kt,Zt=(r("+rca"),Object(M["a"])(Vt,Gt,Wt,!1,null,"d1a5d2d0",null)),Jt=Zt.exports,Ft=function(){function t(t){var e=t.cart,r=t.errorService;this.cart=e,this.errorService=r}return t.prototype.execute=function(t){return Y["b"](this,void 0,void 0,function(){var e;return Y["c"](this,function(r){switch(r.label){case 0:return r.trys.push([0,1,,3]),this.cart.addItemToCart(t),[3,3];case 1:return e=r.sent(),[4,this.errorService.handle(e)];case 2:return r.sent(),[3,3];case 3:return[2]}})})},t}(),Xt=Ft,Yt=i["a"].extend({components:{Button:Jt,Product:bt},props:{id:{type:String,required:!0}},computed:{presenter:function(){var t={productRepository:new ft,cartRepository:new R};return Ht(t)}},methods:{addItemToCart:function(){return Y["b"](this,void 0,void 0,function(){var t;return Y["c"](this,function(e){switch(e.label){case 0:return t=new Xt({cart:new Bt,errorService:new ot({context:"Adding the item to cart"})}),[4,t.execute(this.presenter.item)];case 1:return e.sent(),[2]}})})}},mounted:function(){return Y["b"](this,void 0,void 0,function(){var t;return Y["c"](this,function(e){switch(e.label){case 0:return t={productRepository:new ft,id:parseInt(this.id,10),errorService:new ot({context:"mounting products detail page"})},[4,new qt(t).execute()];case 1:return e.sent(),[2]}})})},destroyed:function(){return Y["b"](this,void 0,void 0,function(){var t;return Y["c"](this,function(e){switch(e.label){case 0:return t={productRepository:new ft},[4,new Ut(t).execute()];case 1:return e.sent(),[2]}})})}}),Qt=Yt,te=(r("Z1W8"),Object(M["a"])(Qt,Lt,At,!1,null,null,null)),ee=te.exports,re=i["a"].extend({name:"product",components:{ProductsDetailContainer:ee}}),ne=re,ie=Object(M["a"])(ne,Dt,Mt,!1,null,null,null),oe=ie.exports,se=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("CartContainer")},ce=[],ae=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Cart"},[t.presenter.isEmpty?r("div",{staticClass:"Cart__Empty"},[t._v("\n    No item found in your cart...\n  ")]):[t._l(t.presenter.items,function(t){return r("CartItem",{key:t.id,staticClass:"Cart__Item",attrs:{item:t}})}),r("Button",{attrs:{text:"checkout",disabled:t.presenter.isCheckingOut},on:{click:t.checkOut}})]],2)},ue=[],le=function(t){var e=t.cartRepository,r=e.getItems();return{items:r,isEmpty:!r||0==r.length,isCheckingOut:e.isCheckingOut()}},de=function(){function t(t){var e=t.cart,r=t.errorService;this.cart=e,this.errorService=r}return t.prototype.execute=function(){return Y["b"](this,void 0,void 0,function(){var t;return Y["c"](this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,this.cart.checkOut()];case 1:return e.sent(),[3,4];case 2:return t=e.sent(),[4,this.errorService.handle(t)];case 3:return e.sent(),[3,4];case 4:return[2]}})})},t}(),pe=de,fe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"CartItem"},[r("div",{staticClass:"CartItem__Image"},[r("img",{attrs:{src:t.item.thumbnail,alt:t.item.name}})]),r("div",{staticClass:"CartItem__Info"},[r("div",{staticClass:"CartItem__Designer"},[t._v(t._s(t.item.designer))]),r("div",{staticClass:"CartItem__Name"},[t._v("\n      "+t._s(t.item.name)+"\n    ")]),r("div",{staticClass:"CartItem__Price"},[t._v("£ "+t._s(t.item.price))])])])},me=[],he=i["a"].extend({props:{item:{type:Object,required:!0}}}),ve=he,_e=(r("P+lK"),Object(M["a"])(ve,fe,me,!1,null,"435ee10e",null)),ye=_e.exports,be=i["a"].extend({components:{Button:Jt,CartItem:ye},computed:{presenter:function(){var t={cartRepository:new R};return le(t)}},methods:{checkOut:function(){return Y["b"](this,void 0,void 0,function(){var t;return Y["c"](this,function(e){switch(e.label){case 0:return t={cart:new Bt,errorService:new ot({context:"checking out"})},[4,new pe(t).execute()];case 1:return e.sent(),[2]}})})}}}),Ce=be,ge=(r("pnXB"),Object(M["a"])(Ce,ae,ue,!1,null,"1b87f643",null)),Ee=ge.exports,Ie=i["a"].extend({name:"home",components:{CartContainer:Ee}}),we=Ie,xe=Object(M["a"])(we,se,ce,!1,null,null,null),Se=xe.exports;i["a"].use(V["a"]);var Pe=new V["a"]({routes:[{path:"/",name:"home",component:Pt},{path:"/about",name:"about",component:jt},{path:"/products/:id",name:"product",component:oe},{path:"/cart",name:"cart",component:Se}]}),Te=r("lIOY");Object(Te["a"])("/service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),i["a"].config.productionTip=!1,new i["a"]({router:Pe,store:P,render:function(t){return t(K)}}).$mount("#app")},zyiU:function(t,e,r){}});
//# sourceMappingURL=app.014bb368.js.map